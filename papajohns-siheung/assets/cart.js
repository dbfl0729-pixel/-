 // --- 피자 메뉴 (25종) ---
    'barbeque_shortrib_crunch': { name: '바베큐 숏립 크런치', prices: { L: 34500, F: 41900 }, type: 'pizza' },
    'mellow_corn_cream': { name: '멜로우 콘크림', prices: { L: 27500, F: 33900, P: 41500 }, type: 'pizza' },
    'starlight_basil': { name: '스타라이트 바질', prices: { L: 33500, F: 39900, P: 48500 }, type: 'pizza' },
    'double_hot_spicy_mexican': { name: '더블 핫 앤 스파이시 멕시칸', prices: { L: 33500, F: 39900 }, type: 'pizza' },
    'super_papas': { name: '수퍼 파파스', prices: { R: 19900, L: 28500, F: 33900, P: 42500 }, type: 'pizza', is_promo: true },
    'johns_favorite': { name: '존스 페이버릿', prices: { L: 29500, F: 34900, P: 45500 }, type: 'pizza', is_promo: true },
    'all_meat': { name: '올미트', prices: { R: 19900, L: 29500, F: 34900, P: 45500 }, type: 'pizza' },
    'spicy_chicken_ranch': { name: '스파이시 치킨랜치', prices: { R: 19900, L: 29500, F: 34900, P: 43500 }, type: 'pizza', is_promo: true },
    'irish_potato': { name: '아이리쉬 포테이토', prices: { R: 18900, L: 27500, F: 32900, P: 40500 }, type: 'pizza', is_promo: true },
    'chicken_barbeque': { name: '치킨 바베큐', prices: { R: 18900, L: 27500, F: 32900, P: 40500 }, type: 'pizza', is_promo: true },
    'crispy_cheese_pepperoni': { name: '크리스피 치즈 페퍼로니 피자', prices: { F: 31900 }, type: 'pizza', is_thin: true },
    'crispy_cheese_triple': { name: '크리스피 치즈 트리플 피자', prices: { F: 33900 }, type: 'pizza', is_thin: true },
    'ham_mushroom_six_cheese': { name: '햄 머쉬룸 식스 치즈', prices: { L: 28500, F: 33900, P: 42500 }, type: 'pizza' },
    'wisconsin_cheese_potato': { name: '위스콘신 치즈 포테이토', prices: { L: 29500, F: 35900, P: 45500 }, type: 'pizza' },
    'double_cheeseburger': { name: '더블 치즈버거', prices: { L: 29500, F: 34900, P: 43500 }, type: 'pizza', is_promo: true },
    'premium_bulgogi': { name: '프리미엄 직화불고기', prices: { L: 29500, F: 34900, P: 43500 }, type: 'pizza', is_promo: true },
    'six_cheese': { name: '식스 치즈', prices: { L: 26500, F: 31900, P: 39500 }, type: 'pizza' },
    'spicy_italian': { name: '스파이시 이탈리안', prices: { L: 27500, F: 33900, P: 40500 }, type: 'pizza' },
    'shrimp_alfredo': { name: '슈림프 알프레도', prices: { F: 34900 }, type: 'pizza', is_thin: true },
    'margherita': { name: '마가리타', prices: { R: 16900, L: 23500, F: 28900, P: 36500 }, type: 'pizza' },
    'pepperoni': { name: '페퍼로니', prices: { R: 17900, L: 25500, F: 30900, P: 38500 }, type: 'pizza' },
    'hawaiian': { name: '하와이안', prices: { R: 17900, L: 26500, F: 32900, P: 39500 }, type: 'pizza' },
    'garden_special': { name: '가든 스페셜', prices: { R: 17900, L: 26500, F: 31900, P: 39500 }, type: 'pizza' },
    'green_it_margherita': { name: '그린잇 식물성 마가리타', prices: { L: 26500 }, type: 'pizza', is_vegan: true },
    'green_it_garden_special': { name: '그린잇 식물성 가든스페셜', prices: { L: 29500 }, type: 'pizza', is_vegan: true },

    // --- 사이드 메뉴 ---
    'mega_choco_cookie': { name: '메가 초코칩 쿠키', price: 11500, type: 'side' },
    'double_choco_brownie': { name: '더블 초코칩 브라우니', price: 12900, type: 'side' },
    'papa_pasta_meat': { name: '파파스 파스타 (미트)', price: 8900, type: 'side' },
    'papa_pasta_rose': { name: '파파스 파스타 (로제)', price: 8900, type: 'side' },
    'chicken_strip': { name: '치킨 스트립', price: 9900, type: 'side' },
    'papa_wing': { name: '파파스 윙', price: 9900, type: 'side' },
    'papa_cornsalad': { name: '파파 콘샐러드', price: 2400, type: 'side' },
    'supreme_papa_bite': { name: '슈프림 파파 바이트', price: 8900, type: 'side' },
    'chicken_parmesan_papa_bite': { name: '치킨 파마산 파파 바이트', price: 8900, type: 'side' },
    'papa_pasta_white': { name: '파파스 파스타 (화이트)', price: 8900, type: 'side' },
    'papa_coleslaw': { name: '파파 코울슬로', price: 2400, type: 'side' },
    'cheesestick': { name: '치즈 스틱', price: 9900, type: 'side' },
    'bacon_cheesestick': { name: '베이컨 치즈 스틱', price: 10900, type: 'side' },
    'bread_stick': { name: '브래드 스틱', price: 6900, type: 'side' },
    'italian_papadias': { name: '이탈리안 파파디아즈', price: 10900, type: 'side' },
    'double_cheeseburger_papadias': { name: '더블 치즈버거 파파디아즈', price: 10900, type: 'side' },

    // --- 음료/소스 메뉴 ---
    'coca_cola_1250': { name: '코카-콜라 1.25L', price: 2300, type: 'drink' },
    'coca_cola_zero_1250': { name: '코카-콜라 제로 1.25L', price: 2300, type: 'drink' },
    'coca_cola_500': { name: '코카콜라 500ml', price: 1700, type: 'drink' },
    'coca_cola_zero_500': { name: '코카콜라 제로 500ml', price: 1700, type: 'drink' },
    'sprite_1500': { name: '스프라이트 1.5L', price: 2300, type: 'drink' },
    'sprite_zero_1500': { name: '스프라이트 제로 1.5L', price: 2300, type: 'drink' },
    'sprite_500': { name: '스프라이트 500ml', price: 1700, type: 'drink' },
    'sprite_zero_500': { name: '스프라이트 제로 500ml', price: 1700, type: 'drink' },
    'fresh_pickle': { name: '프레쉬 피클', price: 600, type: 'sauce' },
    'garlic_dip': { name: '갈릭 디핑소스', price: 500, type: 'sauce' },
    'honey_mustard': { name: '허니머스터드 소스', price: 100, type: 'sauce' },
    'hot_sauce': { name: '핫소스', price: 100, type: 'sauce' }
};

// 2. 장바구니 배열 초기화 및 업데이트 함수 (이전 답변과 동일)
let cart = JSON.parse(localStorage.getItem('papa_johns_cart')) || [];

function addToCart(itemId) {
    const itemData = MENU_DATA[itemId];
    if (!itemData) {
        alert('잘못된 메뉴입니다.');
        return;
    }

    let selectedSize = '';
    let price = itemData.price;

    if (itemData.type === 'pizza') {
        // 피자 메뉴의 경우, 선택된 사이즈와 가격을 가져옴
        const itemElement = document.querySelector(`.menu-item[data-id="${itemId}"]`);
        const sizeSelect = itemElement.querySelector('.size-select');
        
        if (sizeSelect) {
            selectedSize = sizeSelect.value;
            // HTML의 data-price 속성에서 가격을 가져옴
            price = parseFloat(itemElement.querySelector(`.size-select option[value="${selectedSize}"]`).textContent.match(/\(([^)]+)/)[1].replace('원', '').replace(',', ''));
        } else {
             // 사이즈 선택기가 없는 경우 (F 전용 피자 등), 기본 가격 사용
             price = Object.values(itemData.prices)[0]; 
        }
    }
    
    const newItem = {
        id: itemId,
        name: itemData.name,
        size: selectedSize,
        price: price,
        quantity: 1,
        promo: itemData.is_promo || false // 1+1 행사 여부
    };

    cart.push(newItem);
    localStorage.setItem('papa_johns_cart', JSON.stringify(cart));
    alert(`${itemData.name} (${selectedSize || '기본'})가 장바구니에 담겼습니다.`);
    updateCartTotal();
}

function updateCartTotal() {
    let total = 0;
    cart.forEach(item => {
        total += item.price * item.quantity;
    });

    const totalDisplay = document.getElementById('current-total');
    if (totalDisplay) {
        // 금액을 쉼표 형식으로 포맷팅
        totalDisplay.textContent = total.toLocaleString('ko-KR');
    }
}

document.addEventListener('DOMContentLoaded', () => {
    updateCartTotal();
});