<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ• íŒŒíŒŒì¡´ìŠ¤ í”¼ì ë©”ë‰´</title>
    <link rel="stylesheet" href="assets/css/style.css"> 
    
    <style>
        .content-wrapper { padding: 40px 20px; max-width: 1200px; margin: 0 auto; }
        .menu-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .menu-item { background-color: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; }
        .pizza-image { width: 100%; height: 200px; object-fit: cover; border-radius: 4px; margin-bottom: 10px; }
        .menu-item h4 { font-size: 1.4em; margin-bottom: 5px; color: #CC0000; }
        .menu-item .description { font-size: 0.9em; color: #666; min-height: 40px; margin-bottom: 15px; }
        .options-group { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .options-group select { padding: 8px; border: 1px solid #ccc; border-radius: 4px; flex-grow: 1; margin-left: 10px; }
        .price-section { margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; display: flex; justify-content: space-between; align-items: center; }
        .total-price { font-size: 1.5em; color: #333; font-weight: bold; }
        .add-to-cart-btn { background-color: #CC0000; color: white; border: none; padding: 10px; border-radius: 4px; cursor: pointer; margin-top: 10px; font-weight: bold; transition: background-color 0.3s; }
        .add-to-cart-btn:hover { background-color: #A00000; }
        .event-badge { background-color: #CC0000; color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: 700; margin-left: 5px; vertical-align: middle; }
        .event-friday { background-color: #008000; }
        .category-title { font-size: 24px; color: #333; margin-top: 40px; margin-bottom: 20px; padding-left: 10px; border-left: 5px solid #CC0000; }
        .size-fixed-text { color: #CC0000; font-weight: bold; font-size: 14px; margin-left: 10px;}
    </style>
</head>
<body>

<header style="background-color: #CC0000; color: white; padding: 20px; text-align: center;">
    <h1>ğŸ• íŒŒíŒŒì¡´ìŠ¤ ì‹œí¥ì€í–‰ì  ì˜¨ë¼ì¸ ë©”ë‰´íŒ</h1>
</header>
<nav style="background-color: #f4f4f4; padding: 10px 0; text-align: center;">
    <a href="index.html" style="margin: 0 15px; color: #333; text-decoration: none;">â€¢ í™ˆìœ¼ë¡œ</a>
    <a href="#one-plus-one-pizzas" style="margin: 0 15px; color: #333; text-decoration: none;">â€¢ 1+1 ì´ë²¤íŠ¸</a>
    <a href="#best-pizzas" style="margin: 0 15px; color: #333; text-decoration: none;">â€¢ BEST ë©”ë‰´</a>
</nav>

<main class="content-wrapper">
    <h2>ğŸ• í”¼ì ë©”ë‰´ ì „ì²´</h2>
    
    <h3 class="category-title" id="one-plus-one-pizzas">ğŸ”¥ 1+1 ì´ë²¤íŠ¸ í”¼ì (7ì¢…)</h3>
    <p style="color: #CC0000; font-weight: bold; margin-bottom: 20px;">* ë§¤ì£¼ ê¸ˆìš”ì¼, ë°©ë¬¸ í¬ì¥ ì‹œ 1+1 (L ì‚¬ì´ì¦ˆ ê³ ì •)</p>
    <div class="menu-list">
        </div>

    <h3 class="category-title" id="best-pizzas">â­ï¸ BEST & ìŠ¤í…Œë””ì…€ëŸ¬</h3>
    <div class="menu-list">
        </div>
    
    <h3 class="category-title" id="new-premium-pizzas">âœ¨ NEW & í”„ë¦¬ë¯¸ì—„</h3>
    <div class="menu-list">
        </div>
    
    <h3 class="category-title" id="specialty-pizzas">ğŸ• ìŠ¤í˜ì…œí‹°</h3>
    <div class="menu-list">
        </div>

    <h3 class="category-title" id="thin-excl-pizzas">ğŸ’¡ í¬ë¦¬ìŠ¤í”¼ ì”¬ í¬ëŸ¬ìŠ¤íŠ¸ (TH ì „ìš©)</h3>
    <div class="menu-list">
        </div>
    
    <h3 class="category-title" id="classic-pizzas">ğŸ“œ í´ë˜ì‹</h3>
    <div class="menu-list">
        </div>

    <h3 class="category-title" id="vegan-pizzas">ğŸŒ± ê·¸ë¦°ì‡ (ë¹„ê±´)</h3>
    <div class="menu-list">
        </div>
</main>

<script src="assets/js/cart.js"></script> 

<script>
    // cart.jsì—ì„œ ì •ì˜í•œ PIZZA_MENU, CRUST_OPTIONS, EVENT_PIZZA_IDS, formatPrice, isFriday í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    
    const createPizzaCard = (pizza) => {
        const isEventPizza = EVENT_PIZZA_IDS.includes(pizza.id);
        const isTodayFriday = typeof isFriday === 'function' ? isFriday() : false;
        const isFridayEventActive = isEventPizza && isTodayFriday;
        
        // ë©”ë‰´ë³„ ì„ íƒ ê°€ëŠ¥ í¬ëŸ¬ìŠ¤íŠ¸ ëª©ë¡ í•„í„°ë§
        const availableCrusts = pizza.crustOptions || CRUST_OPTIONS.map(c => c.value);

        // í¬ëŸ¬ìŠ¤íŠ¸ ì˜µì…˜ HTML ìƒì„±
        const crustOptionsHtml = CRUST_OPTIONS
            .filter(crust => availableCrusts.includes(crust.value))
            .map(crust => {
                let priceText = '';
                if (crust.priceL > 0 && crust.value !== 'original' && crust.value !== 'thin') {
                    priceText = `(+${formatPrice(crust.priceL)}ì›)`;
                } else if (crust.value === 'thin') {
                    priceText = `(F ì‚¬ì´ì¦ˆ ë¬´ë£Œ ë³€ê²½)`;
                }
                
                // TH ì „ìš© í”¼ìëŠ” ì”¬ í¬ëŸ¬ìŠ¤íŠ¸ë¡œ ê³ ì •
                const isSelected = pizza.category === 'THIN_EXCL' && crust.value === 'thin';

                return `<option value="${crust.value}" ${isSelected ? 'selected' : ''}>${crust.name.split('(')[0].trim()} ${priceText}</option>`;
            }).join('');
        
        
        // ì‚¬ì´ì¦ˆ ì˜µì…˜ HTML ìƒì„±
        let sizeOptionsHtml;
        const availableSizes = Object.keys(pizza.prices);
        const prices = pizza.prices;

        if (isFridayEventActive) {
            sizeOptionsHtml = `<option value="L" selected>L (ë¼ì§€ / ${formatPrice(prices['L'])}ì›) - 1+1 ê³ ì •</option>`;
        } else {
            sizeOptionsHtml = availableSizes.map(size => {
                const isLSize = size === 'L' ? 'selected' : '';
                return `<option value="${size}" ${isLSize}>${size} (${formatPrice(prices[size])}ì›)</option>`;
            }).join('');
        }

        // í”¼ì ì´ë¦„ ì˜†ì— ì´ë²¤íŠ¸ ë°°ì§€ í‘œì‹œ
        const pizzaNameDisplay = isFridayEventActive 
            ? `${pizza.name} <span class="event-badge event-friday">íŒŒíŒŒí”„ë¼ì´ë°ì´ 1+1</span>`
            : `${pizza.name} ${isEventPizza ? '<span class="event-badge">1+1 ê°€ëŠ¥</span>' : ''}`;

        // í¬ëŸ¬ìŠ¤íŠ¸ ì„ íƒ ë¶ˆê°€ ë©”ë‰´ ì²˜ë¦¬
        const isCrustSelectDisabled = pizza.crustOptions && pizza.crustOptions.length <= 1;
        const fixedCrustName = isCrustSelectDisabled ? CRUST_OPTIONS.find(c => c.value === availableCrusts[0]).name.split('(')[0].trim() : '';

        return `
            <div class="menu-item ${isEventPizza ? 'event-pizza' : ''}" data-id="${pizza.id}" data-name="${pizza.name}">
                <img src="assets/images/pizza-${pizza.id}.jpg" alt="${pizza.name}" class="pizza-image" onerror="this.onerror=null;this.src=''">
                <h4>${pizzaNameDisplay}</h4>
                <p class="description">${pizza.desc}</p>
                
                <div class="options-group">
                    <label for="size-select-${pizza.id}">ì‚¬ì´ì¦ˆ:</label>
                    <select id="size-select-${pizza.id}" class="size-select" ${isFridayEventActive || availableSizes.length <= 1 ? 'disabled' : ''}>
                        ${sizeOptionsHtml}
                    </select>
                    ${availableSizes.length <= 1 ? `<span class="size-fixed-text">${availableSizes[0]} ì‚¬ì´ì¦ˆ ê³ ì •</span>` : ''}
                </div>
                
                <div class="options-group" ${isCrustSelectDisabled ? 'style="display:none;"' : ''}>
                    <label for="crust-select-${pizza.id}">í¬ëŸ¬ìŠ¤íŠ¸:</label>
                    <select id="crust-select-${pizza.id}" class="crust-select" ${isCrustSelectDisabled ? 'disabled' : ''}>
                        ${crustOptionsHtml}
                    </select>
                </div>
                ${isCrustSelectDisabled ? `<div class="options-group"><label>í¬ëŸ¬ìŠ¤íŠ¸:</label><span class="size-fixed-text">${fixedCrustName} ê³ ì •</span></div>` : ''}


                <div class="price-section">
                    <strong>ìµœì¢… ê°€ê²©: </strong>
                    <span id="total-price-${pizza.id}" class="total-price">0</span>ì›
                </div>

                <button class="add-to-cart-btn">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
            </div>
        `;
    };
    
    // í”¼ì ëª©ë¡ì„ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ HTMLì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
    const appendPizzaCards = () => {
        // ì¹´í…Œê³ ë¦¬ IDì— ë§ì¶° HTML ì»¨í…Œì´ë„ˆ ì„ íƒìë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
        const menuListContainers = {
            'EVENT': document.querySelector('#one-plus-one-pizzas + p + .menu-list'),
            'BEST': document.querySelector('#best-pizzas + .menu-list'),
            'NEW_PREMIUM': document.querySelector('#new-premium-pizzas + .menu-list'),
            'SPECIALTY': document.querySelector('#specialty-pizzas + .menu-list'),
            'THIN_EXCL': document.querySelector('#thin-excl-pizzas + .menu-list'),
            'CLASSIC': document.querySelector('#classic-pizzas + .menu-list'),
            'VEGAN': document.querySelector('#vegan-pizzas + .menu-list'),
        };

        PIZZA_MENU.forEach(pizza => {
            const cardHtml = createPizzaCard(pizza);
            
            // 1+1 í”¼ìëŠ” 'EVENT' ì„¹ì…˜ì—ë§Œ ì¶”ê°€
            if (EVENT_PIZZA_IDS.includes(pizza.id) && menuListContainers['EVENT']) {
                menuListContainers['EVENT'].insertAdjacentHTML('beforeend', cardHtml);
            } 
            // ê·¸ ì™¸ í”¼ìëŠ” ì¹´í…Œê³ ë¦¬ ì„¹ì…˜ì— ì¶”ê°€ (ì¤‘ë³µ ë°©ì§€)
            else if (menuListContainers[pizza.category] && !EVENT_PIZZA_IDS.includes(pizza.id)) { 
                menuListContainers[pizza.category].insertAdjacentHTML('beforeend', cardHtml);
            }
        });
    };
    
    // appendPizzaCards í•¨ìˆ˜ë¥¼ DOMContentLoaded ì‹œì ì— ì‹¤í–‰
    document.addEventListener('DOMContentLoaded', () => {
        // ê¸ˆìš”ì¼ì´ë©´ ì´ë²¤íŠ¸ ì œëª© ë° ì„¤ëª… ì—…ë°ì´íŠ¸
        const isTodayFriday = typeof isFriday === 'function' ? isFriday() : false;
        const eventTitle = document.getElementById('one-plus-one-pizzas');
        if (eventTitle && isTodayFriday) {
            eventTitle.innerHTML = 'ğŸ‰ **íŒŒíŒŒí”„ë¼ì´ë°ì´ 1+1 (L ì‚¬ì´ì¦ˆ ê³ ì •)**';
            eventTitle.style.color = '#CC0000';
            const eventDesc = document.querySelector('#one-plus-one-pizzas + p');
            if (eventDesc) {
                 eventDesc.innerHTML = '<strong>* 1+1ì€ í¬ì¥ ì „ìš©ì´ë©°, L ì‚¬ì´ì¦ˆë¡œ ê³ ì •ë©ë‹ˆë‹¤. í¬ëŸ¬ìŠ¤íŠ¸ ì¶”ê°€ê¸ˆì€ ê°ê° ë³„ë„ ë¶€ê³¼ë©ë‹ˆë‹¤.</strong>';
            }
        }
        // í”¼ì ë©”ë‰´ ì¹´ë“œ ìƒì„± ì‹¤í–‰
        appendPizzaCards();
    });
</script>
</body>
</html>