<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ• íŒŒíŒŒì¡´ìŠ¤ í”¼ì ë©”ë‰´</title>
    <style>
        :root {
            --main-color: #4a6c4c;
            --accent-color: #ffcc00;
            --text-color: #333;
            --white: #ffffff;
            --font-family: 'Malgun Gothic', 'Arial', sans-serif;
            --danger-color: #d9534f;
            --info-color: #46b8da;
        }

        body {
            font-family: var(--font-family);
            margin: 0;
            padding: 0;
            background-color: #f8f8f8;
            color: var(--text-color);
        }

        /* (í—¤ë”, ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒ€ì¼ì€ ì´ì „ê³¼ ë™ì¼) */
        header {
            background-color: var(--main-color);
            color: var(--white);
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        header h1 {
            margin: 0;
            font-size: 1.5em;
            letter-spacing: 2px;
        }
        nav {
            background-color: var(--white);
            border-bottom: 1px solid #eee;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        nav ul li a {
            display: block;
            color: var(--text-color);
            text-decoration: none;
            font-weight: bold;
            padding: 15px 20px;
            transition: background-color 0.2s, color 0.2s;
        }
        nav ul li a[href="pizza.html"] {
            background-color: var(--accent-color);
            color: var(--text-color);
        }
        nav ul li a:hover {
            background-color: var(--accent-color);
        }

        /* í¬ëŸ¬ìŠ¤íŠ¸ ìš”ì•½ ì•ˆë‚´ ìŠ¤íƒ€ì¼ (ì´ì „ê³¼ ë™ì¼) */
        .crust-summary {
            background-color: var(--white);
            padding: 20px;
            margin: 20px auto;
            max-width: 1200px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        .crust-summary h3 {
            color: var(--main-color);
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.5em;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 5px;
        }
        .crust-list-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            list-style: none;
            padding: 0;
        }
        .crust-list-grid li {
            padding: 10px;
            border-radius: 5px;
            background-color: #f4f4f4;
            font-size: 0.9em;
        }
        .crust-list-grid strong {
            color: var(--text-color);
            display: block;
            margin-bottom: 3px;
        }
        .crust-note-price {
            margin-top: 15px;
            padding: 10px;
            background-color: #fff0d4;
            border-left: 5px solid var(--accent-color);
            font-weight: bold;
            color: var(--danger-color);
            line-height: 1.5;
        }
        .crust-note-price span {
            color: var(--text-color);
        }

        /* í”¼ì ë©”ë‰´íŒ ìŠ¤íƒ€ì¼ */
        .pizza-menu-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .pizza-menu-container h2 {
            text-align: center;
            color: var(--main-color);
            font-size: 2.2em;
            margin-bottom: 30px;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 10px;
        }
        .pizza-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px; /* ì¹´í…Œê³ ë¦¬ ê°„ê²© ì¶”ê°€ */
        }
        .pizza-card {
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
        }
        .pizza-card:hover {
            transform: translateY(-5px);
        }
        .pizza-card-header {
            padding: 15px;
            background-color: var(--main-color);
            color: var(--white);
        }
        .pizza-card-header h3 {
            margin: 0;
            font-size: 1.4em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .pizza-card-header h3 span.badge {
            background-color: var(--danger-color);
            color: white;
            padding: 4px 8px;
            border-radius: 5px;
            font-size: 0.7em;
            font-weight: bold;
        }
        .pizza-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .pizza-card-body {
            padding: 15px;
            flex-grow: 1;
        }
        .pizza-card-body p {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }
        /* ê°€ê²© ë…¸íŠ¸ ìŠ¤íƒ€ì¼ (ìˆ˜ì •ë¨) */
        .pizza-price-notes {
            margin-bottom: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
            padding: 10px;
            background-color: #fcfcfc;
        }
        .price-item {
            font-size: 0.9em;
            margin-bottom: 3px;
            color: var(--text-color);
        }
        .price-item strong {
            color: var(--main-color);
            margin-right: 5px;
        }
        /* ê³„ì‚°/ì˜µì…˜ ì„ íƒ UX ê°œì„  ìŠ¤íƒ€ì¼ (ì´ì „ê³¼ ë™ì¼) */
        .pizza-options {
            padding: 15px;
            border-top: 1px dashed #ddd;
            background-color: #f9f9f9;
        }
        .option-group {
            margin-bottom: 10px;
        }
        .option-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--text-color);
        }
        .option-group select, .option-group input {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            box-sizing: border-box;
            font-size: 1em;
            background-color: var(--white);
        }
        .current-price {
            text-align: right;
            font-size: 1.3em;
            font-weight: bold;
            color: var(--danger-color);
            margin-top: 10px;
            margin-bottom: 10px;
            padding-top: 5px;
            border-top: 1px solid #eee;
        }
        .current-price small {
            font-size: 0.7em;
            color: #666;
            font-weight: normal;
            margin-left: 5px;
        }
        .add-to-bill-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: var(--main-color);
            color: var(--white);
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 15px;
        }
        .add-to-bill-btn:hover:not(:disabled) {
            background-color: #3b523c;
        }
        .add-to-bill-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .crust-note-small {
            font-size: 0.8em;
            color: var(--danger-color);
            text-align: center;
            padding: 10px 0;
            background-color: #fff0f0;
            border-radius: 5px;
            margin-top: 5px;
        }
        .vegan-badge {
            background-color: #4CAF50 !important; /* ë…¹ìƒ‰ */
        }
        .thin-note {
            font-size: 0.8em;
            color: var(--info-color);
            text-align: center;
            padding: 10px 0;
            background-color: #f0f8ff;
            border-radius: 5px;
            margin-top: 5px;
        }
        .sp-crust-only-note {
            font-size: 0.8em;
            color: var(--danger-color);
            text-align: center;
            padding: 10px 0;
            background-color: #fff0f0;
            border-radius: 5px;
            margin-top: 5px;
        }
        /* (í‘¸í„° ìŠ¤íƒ€ì¼ì€ ì´ì „ê³¼ ë™ì¼) */
        footer {
            background-color: #333;
            color: #ccc;
            padding: 20px 0;
            text-align: center;
            font-size: 0.9em;
            margin-top: 40px;
        }
        footer p {
            margin: 5px 0;
        }
        footer a {
            color: var(--accent-color);
            text-decoration: none;
        }
    </style>
</head>
<body>

    <header>
        <h1>ì‹œí¥ì€í–‰ì  íŒŒíŒŒì¡´ìŠ¤ ë©”ë‰´íŒ</h1>
    </header>
    
    <nav>
        <ul>
            <li><a href="index.html">ğŸ  ì²« í™”ë©´</a></li>
            <li><a href="menu.html">ğŸ• í”¼ì</a></li>
            <li><a href="sides.html">ğŸ— ì‚¬ì´ë“œ</a></li>
            <li><a href="drinks_sauces.html">ğŸ¥¤ ìŒë£Œ & ì†ŒìŠ¤</a></li>
            <li><a href="discounts.html">ğŸ’¸ ì œíœ´ í• ì¸</a></li>
            <li><a href="cart.html">ğŸ§¾ ê³„ì‚°ì„œ</a></li>
        </ul>
    </nav>

    <div class="crust-summary">
        <h3>íŒŒíŒŒì¡´ìŠ¤ í¬ëŸ¬ìŠ¤íŠ¸</h3>
        
        <ul class="crust-list-grid">
            <li><strong>ì˜¤ë¦¬ì§€ë„</strong> - ì«„ê¹ƒí•˜ê³  ê³ ì†Œí•œ ê¸°ë³¸ì— ì¶©ì‹¤í•œ ë§›</li>
            <li><strong>ì”¬(THIN)</strong> - ë°”ì‚­í•˜ê³  ì–‡ì€ ë„ìš°ë¡œ í† í•‘ì˜ ë§›ì„ ê·¹ëŒ€í™”</li>
            <li><strong>ì¹˜ì¦ˆë¡¤</strong> - ì§­ìª¼ë¦„í•œ ì²´ë‹¤ì¹˜ì¦ˆê°€ ë¿Œë ¤ì§„ í¬ëŸ¬ìŠ¤íŠ¸ ì† ìŠ¤íŠ¸ë§ì¹˜ì¦ˆì™€ì˜ ì¡°í•©</li>
            <li><strong>ê³¨ë“œë§</strong> - ë‹¬ì½¤í•œ ê³ êµ¬ë§ˆ ë¬´ìŠ¤ì™€ ìŠ¤íŠ¸ë§ ì¹˜ì¦ˆì˜ ì¡°í™”</li>
            <li><strong>ìŠ¤íŒŒì´ì‹œ ê°ˆë¦­ ì¹˜ì¦ˆë¡¤</strong> - ê°ˆë¦­ í–¥ê³¼ íˆ¬ ë¸”ë Œë“œ ì¹˜ì¦ˆ ë ˆë“œí˜í¼ë¥¼ ì‚¬ìš©í•œ ì§„í•œ í’ë¯¸</li>
            <li><strong>í¬ë£¨ì•„ìƒ</strong> - ê²¹ê²¹ì´ ì‚´ì•„ìˆëŠ” ë°”ì‚­í•¨ ë²„í„°ì˜ í’ë¯¸ë¡œ ì™„ì„± ëœ ë„ìš°</li>
        </ul>
    </div>
    
    <div class="pizza-menu-container">
        <h2>í”„ë¦¬ë¯¸ì—„ í”¼ì</h2>
        <div id="premium-list" class="pizza-list">
            </div>

        <h2>ë² ìŠ¤íŠ¸ í”¼ì</h2>
        <div id="best-list" class="pizza-list">
            </div>

        <h2>ìŠ¤í˜ì…œí‹° & ì”¬ í”¼ì</h2>
        <div id="specialty-list" class="pizza-list">
            </div>
        
        <h2>í´ë˜ì‹ í”¼ì</h2>
        <div id="classic-list" class="pizza-list">
            </div>
        
        <h2>ë¹„ê±´ í”¼ì</h2>
        <div id="vegan-list" class="pizza-list">
            </div>
    </div>
    
    <footer>
        <p>Copyright &copy; 2023 Papa John's Pizza Siheung Eungeng Branch</p>
        <p><a href="#">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a> | <a href="#">ì´ìš©ì•½ê´€</a></p>
    </footer>

    <script>
    // --- 1. ìƒìˆ˜ ë° ë°ì´í„° ì •ì˜ ---

    // ì¥ë°”êµ¬ë‹ˆ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤ (cart.jsì™€ í†µì¼)
    const CART_KEY = 'papaJohnsCart';

    // R: ë ˆê·¤ëŸ¬(25cm), L: ë¼ì§€(31cm), F: íŒ¨ë°€ë¦¬(36cm), P: íŒŒí‹°(41cm)
    const PIZZA_PRICES = {
        // âš ï¸ ê°€ê²©ì´ L, F ì‚¬ì´ì¦ˆ ìœ„ì£¼ë¡œ ì •ì˜ëœ ê²½ìš° R/PëŠ” 0ìœ¼ë¡œ ì²˜ë¦¬ (ì˜µì…˜ì—ì„œ ì œì™¸ë¨)
        'barbeque_shortrib_crunch': { R: 0, L: 34500, F: 41900, P: 0 },
        'mellow_corn_cream': { R: 0, L: 27500, F: 33900, P: 41500 },
        'starlight_basil': { R: 0, L: 33500, F: 39900, P: 48500 },
        'double_hot_spicy_mexican': { R: 0, L: 33500, F: 39900, P: 0 },
        'super_papas': { R: 19900, L: 28500, F: 33900, P: 42500 },
        'johns_favorite': { R: 0, L: 29500, F: 34900, P: 45500 },
        'all_meat': { R: 19900, L: 29500, F: 34900, P: 45500 },
        'spicy_chicken_ranch': { R: 19900, L: 29500, F: 34900, P: 43500 },
        'irish_potato': { R: 18900, L: 27500, F: 32900, P: 40500 },
        'chicken_barbeque': { R: 18900, L: 27500, F: 32900, P: 40500 },
        'crispy_cheese_pepperoni': { R: 0, L: 0, F: 31900, P: 0 },
        'crispy_cheese_triple': { R: 0, L: 0, F: 33900, P: 0 },
        'ham_mushroom_six_cheese': { R: 0, L: 28500, F: 33900, P: 42500 },
        'wisconsin_cheese_potato': { R: 0, L: 29500, F: 35900, P: 45500 },
        'double_cheeseburger': { R: 0, L: 29500, F: 34900, P: 43500 },
        'premium_bulgogi': { R: 0, L: 29500, F: 34900, P: 43500 },
        'six_cheese': { R: 0, L: 26500, F: 31900, P: 39500 },
        'spicy_italian': { R: 0, L: 27500, F: 33900, P: 40500 },
        'shrimp_alfredo': { R: 0, L: 0, F: 34900, P: 0 },
        'margherita': { R: 16900, L: 23500, F: 28900, P: 36500 },
        'pepperoni': { R: 17900, L: 25500, F: 30900, P: 38500 },
        'hawaiian': { R: 17900, L: 26500, F: 32900, P: 39500 },
        'garden_special': { R: 17900, L: 26500, F: 31900, P: 39500 },
        'green_it_margherita': { R: 26500, L: 0, F: 0, P: 0 },
        'green_it_garden_special': { R: 29500, L: 0, F: 0, P: 0 }
    };

    // í¬ëŸ¬ìŠ¤íŠ¸ ê¸°ë³¸ ì¶”ê°€ ê¸ˆì•¡ ë°ì´í„° (ìœ ì € HTML ë°ì´í„° ê¸°ë°˜)
    const CRUST_PRICES = {
        'original': 0,
        'thin': 0,
        'cheeseroll': 4000,
        'goldring': 4000,
        'spicygarlic': 4000,
        'croissant': 6000
    };

    // í¬ëŸ¬ìŠ¤íŠ¸ ì˜µì…˜ ì´ë¦„ ë§¤í•‘ (ìœ ì € HTML ë°ì´í„° ê¸°ë°˜)
    const CRUST_NAME_MAP = {
        'original': 'ì˜¤ë¦¬ì§€ë„',
        'thin': 'ì”¬ (THIN)',
        'cheeseroll': 'ì¹˜ì¦ˆë¡¤ (â‚©4,000)',
        'goldring': 'ê³¨ë“œë§ (â‚©4,000)',
        'spicygarlic': 'ìŠ¤íŒŒì´ì‹œ ê°ˆë¦­ ì¹˜ì¦ˆë¡¤ (â‚©4,000)',
        'croissant': 'í¬ë£¨ì•„ìƒ (â‚©6,000)'
    };

    // ì¥ë°”êµ¬ë‹ˆ ì €ì¥ì„ ìœ„í•œ í”¼ì IDì™€ ì´ë¦„ ë§¤í•‘
    const PIZZA_NAME_MAP = {
        'barbeque_shortrib_crunch': 'ë°”ë² í ìˆë¦½ í¬ëŸ°ì¹˜',
        'mellow_corn_cream': 'ë©œë¡œìš° ì½˜í¬ë¦¼',
        'starlight_basil': 'ìŠ¤íƒ€ë¼ì´íŠ¸ ë°”ì§ˆ',
        'double_hot_spicy_mexican': 'ë”ë¸” í•« ì•¤ ìŠ¤íŒŒì´ì‹œ ë©•ì‹œì¹¸',
        'super_papas': 'ìˆ˜í¼ íŒŒíŒŒìŠ¤',
        'johns_favorite': 'ì¡´ìŠ¤ í˜ì´ë²„ë¦¿',
        'all_meat': 'ì˜¬ë¯¸íŠ¸',
        'spicy_chicken_ranch': 'ìŠ¤íŒŒì´ì‹œ ì¹˜í‚¨ëœì¹˜',
        'irish_potato': 'ì•„ì´ë¦¬ì‰¬ í¬í…Œì´í† ',
        'chicken_barbeque': 'ì¹˜í‚¨ ë°”ë² í',
        'crispy_cheese_pepperoni': 'í¬ë¦¬ìŠ¤í”¼ ì¹˜ì¦ˆ í˜í¼ë¡œë‹ˆ í”¼ì',
        'crispy_cheese_triple': 'í¬ë¦¬ìŠ¤í”¼ ì¹˜ì¦ˆ íŠ¸ë¦¬í”Œ í”¼ì',
        'ham_mushroom_six_cheese': 'í–„ ë¨¸ì‰¬ë£¸ ì‹ìŠ¤ ì¹˜ì¦ˆ',
        'wisconsin_cheese_potato': 'ìœ„ìŠ¤ì½˜ì‹  ì¹˜ì¦ˆ í¬í…Œì´í† ',
        'double_cheeseburger': 'ë”ë¸” ì¹˜ì¦ˆë²„ê±°',
        'premium_bulgogi': 'í”„ë¦¬ë¯¸ì—„ ì§í™”ë¶ˆê³ ê¸°',
        'six_cheese': 'ì‹ìŠ¤ ì¹˜ì¦ˆ',
        'spicy_italian': 'ìŠ¤íŒŒì´ì‹œ ì´íƒˆë¦¬ì•ˆ',
        'shrimp_alfredo': 'ìŠˆë¦¼í”„ ì•Œí”„ë ˆë„',
        'margherita': 'ë§ˆê°€ë¦¬íƒ€',
        'pepperoni': 'í˜í¼ë¡œë‹ˆ',
        'hawaiian': 'í•˜ì™€ì´ì•ˆ',
        'garden_special': 'ê°€ë“  ìŠ¤í˜ì…œ',
        'green_it_margherita': 'ê·¸ë¦°ì‡ ì‹ë¬¼ì„± ë§ˆê°€ë¦¬íƒ€',
        'green_it_garden_special': 'ê·¸ë¦°ì‡ ì‹ë¬¼ì„± ê°€ë“ ìŠ¤í˜ì…œ'
    };

    // ê¸ˆìš”ì¼ 1+1 ì´ë²¤íŠ¸ ëŒ€ìƒ ë©”ë‰´ ID (cart.jsì™€ í†µì¼)
    const BOGO_MENU_IDS = [
        'super_papas', 
        'johns_favorite', 
        'spicy_chicken_ranch', 
        'irish_potato', 
        'chicken_barbeque',
        'double_cheeseburger',
        'premium_bulgogi'
    ];

    // --- 1.5. í”¼ì ìƒì„¸ ë°ì´í„° ì •ì˜ (ìœ ì € ì œê³µ ë°ì´í„° ê¸°ë°˜, IDë§Œ stringìœ¼ë¡œ í†µì¼) ---
    const PIZZA_DATA = [
        {
            id: 'barbeque_shortrib_crunch', name: "ë°”ë² í ìˆë¦½ í¬ëŸ°ì¹˜", category: "í”„ë¦¬ë¯¸ì—„ í”¼ì", note: "NEW",
            description: "í•œ íŒ ê°€ë“ ì†Œê°ˆë¹„, ì˜¤ë¦¬ì§€ë„ ì•„ë©”ë¦¬ì¹¸ BBQ! ì¹˜ì¦ˆì™€ ë°”ì‚­í•œ ì‹ê°ê¹Œì§€ ë”í•œ ë¦¬ì–¼ ê³ ê¸° í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_bbq_shortrib.jpg"
        },
        {
            id: 'mellow_corn_cream', name: "ë©œë¡œìš° ì½˜í¬ë¦¼", category: "í”„ë¦¬ë¯¸ì—„ í”¼ì", note: "",
            description: "ë¶€ë“œëŸ¬ìš´ ì˜¥ìˆ˜ìˆ˜í¬ë¦¼ê³¼ ì½˜&íŒŒì¸ì• í”Œì„ ë”í•œ ë‹¬ì½¤í•œ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_mellow_corn_cream.jpg"
        },
        {
            id: 'starlight_basil', name: "ìŠ¤íƒ€ë¼ì´íŠ¸ ë°”ì§ˆ", category: "í”„ë¦¬ë¯¸ì—„ í”¼ì", note: "* í¬ëŸ¬ìŠ¤íŠ¸ ì„ íƒ ë¶ˆê°€",
            description: "ì…ì•ˆ ê°€ë“ ë°”ì§ˆì˜ í–¥ê¸‹í•¨ê³¼ ê³ ì†Œí•œ ì¹˜ì¦ˆì˜ í’ë¯¸ê°€ ëŠê»´ì§€ëŠ” ì˜¤ì§ ìŠ¤íƒ€ë¼ì´íŠ¸ ë°”ì§ˆë§Œì˜ íŠ¹ë³„í•œ ë³„ëª¨ì–‘ í”„ë¦¬ë¯¸ì—„ í”¼ì",
            crustOptions: ["original"], // í¬ëŸ¬ìŠ¤íŠ¸ ë³€ê²½ ë¶ˆê°€
            image: "images/pizzas/pizza_starlight_basil.jpg"
        },
        {
            id: 'double_hot_spicy_mexican', name: "ë”ë¸” í•« ì•¤ ìŠ¤íŒŒì´ì‹œ ë©•ì‹œì¹¸", category: "í”„ë¦¬ë¯¸ì—„ í”¼ì", note: "",
            description: "ìƒˆë¡œìš´ ë§›ì˜ ìŠ¤íŒŒì´ì‹œ ê°ˆë¦­ ì¹˜ì¦ˆë¡¤ê³¼ í• ë¼í˜ë‡¨ì˜ ë§Œë‚¨ìœ¼ë¡œ ê°•ë ¬í•œ ë§¤ì½¤í•¨ì´ ê°€ë“í•œ í”¼ì",
            crustOptions: ["original", "spicygarlic"], // ìŠ¤íŒŒì´ì‹œê°ˆë¦­ì¹˜ì¦ˆë¡¤ë§Œ ì„ íƒ ê°€ëŠ¥ìœ¼ë¡œ ê°„ì£¼
            image: "images/pizzas/pizza_double_hot_mexican.jpg"
        },
        {
            id: 'super_papas', name: "ìˆ˜í¼ íŒŒíŒŒìŠ¤", category: "ë² ìŠ¤íŠ¸ í”¼ì", note: "BEST, 1+1í–‰ì‚¬ í”¼ì",
            description: "ì‹ ì„ í•œ í† ë§ˆí†  ì†ŒìŠ¤ ìœ„ì— ê°ì¢… ê³ ê¸°ì™€ ì±„ì†Œê°€ ë“¬ë¿ í† í•‘ëœ íŒŒíŒŒì¡´ìŠ¤ì˜ ë² ìŠ¤íŠ¸ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_super_papas.jpg"
        },
        {
            id: 'johns_favorite', name: "ì¡´ìŠ¤ í˜ì´ë²„ë¦¿", category: "ë² ìŠ¤íŠ¸ í”¼ì", note: "BEST, 1+1í–‰ì‚¬ í”¼ì",
            description: "ì´íƒˆë¦¬ì•ˆ ì†Œì‹œì§€, í˜í¼ë¡œë‹ˆì™€ 6ì¢…ì˜ ì¹˜ì¦ˆê°€ ë§Œë“¤ì–´ ë‚´ëŠ” ì§„í•œ í’ë¯¸ì˜ íŒŒíŒŒì¡´ìŠ¤ ë² ìŠ¤íŠ¸ ì…€ëŸ¬ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_johns_favorite.jpg"
        },
        {
            id: 'all_meat', name: "ì˜¬ë¯¸íŠ¸", category: "ë² ìŠ¤íŠ¸ í”¼ì", note: "",
            description: "í˜í¼ë¡œë‹ˆ, í–„, ì´íƒˆë¦¬ì•ˆ ì†Œì‹œì§€, ë¹„í”„í† í•‘ê¹Œì§€ íŒŒíŒŒì¡´ìŠ¤ì˜ ì—„ì„ ëœ ê³ ê¸°í† í•‘ìœ¼ë¡œ ê½‰ ì±„ìš´ í™˜ìƒì˜ ë¯¸íŠ¸ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_all_meats.jpg"
        },
        {
            id: 'spicy_chicken_ranch', name: "ìŠ¤íŒŒì´ì‹œ ì¹˜í‚¨ëœì¹˜", category: "ë² ìŠ¤íŠ¸ í”¼ì", note: "1+1í–‰ì‚¬ í”¼ì",
            description: "ì€ì€í•œ í–¥ê³¼ ë§›ì˜ ëœì¹˜ ì†ŒìŠ¤, ê·¸ë¦´ë“œ ì¹˜í‚¨, ìƒí¼í•œ í† ë§ˆí† ì™€ í• ë¼í˜ë‡¨ê°€ í† í•‘ì˜ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_spicy_chicken_ranch.jpg"
        },
        {
            id: 'irish_potato', name: "ì•„ì´ë¦¬ì‰¬ í¬í…Œì´í† ", category: "ë² ìŠ¤íŠ¸ í”¼ì", note: "1+1í–‰ì‚¬ í”¼ì",
            description: "ì§„í•œ ê°ˆë¦­ ì†ŒìŠ¤ì™€ ë‹´ë°±í•œ í¬í…Œì´í†  ì²­í¬ì˜ ì¡°í™”ë¡œ ëˆ„êµ¬ì—ê²Œë‚˜ ì‚¬ë‘ ë°›ëŠ” ë² ìŠ¤íŠ¸ ì…€ëŸ¬ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_irish_potato.jpg"
        },
        {
            id: 'chicken_barbeque', name: "ì¹˜í‚¨ ë°”ë² í", category: "ë² ìŠ¤íŠ¸ í”¼ì", note: "1+1í–‰ì‚¬ í”¼ì",
            description: "ìƒˆì½¤ë‹¬ì½¤í•œ íƒ€ë°”ìŠ¤ì½” BBQ ì†ŒìŠ¤ì™€ ë‘íˆ¼í•œ ê·¸ë¦´ë“œ ì¹˜í‚¨ì´ ì–´ìš°ëŸ¬ì ¸ íŒŒíŒŒì¡´ìŠ¤ë§Œì˜ íŠ¹ë³„í•œ ë§›ì„ ë‚´ëŠ” ì¹˜í‚¨ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_chicken_barbeque.jpg"
        },
        {
            id: 'crispy_cheese_pepperoni', name: "í¬ë¦¬ìŠ¤í”¼ ì¹˜ì¦ˆ í˜í¼ë¡œë‹ˆ í”¼ì", category: "ìŠ¤í˜ì…œí‹° & ì”¬ í”¼ì", note: "*THì „ìš©*",
            description: "ì–‡ì€ ì”¬ë„ìš° ë°”ë‹¥ì— íŒŒë§ˆì‚°+ë¡œë§ˆë…¸ ì¹˜ì¦ˆê°€ ë”í•´ì ¸ ë”ìš± ë°”ì‚­í•¨ê³¼ ì¹˜ì¦ˆì˜ ê³ ì†Œí•œ í’ë¯¸ë¥¼ ëŠë‚„ ìˆ˜ ìˆê³  í† ë§ˆí†  ì†ŒìŠ¤ì™€ ì«„ê¹ƒí•œ ì‹ê°ì˜ ìŠ¤íŠ¸ë§ ì¹˜ì¦ˆ, íŒŒë§ˆì‚°+ë¡œë§ˆë…¸ ì¹˜ì¦ˆê°€ í† í•‘ëœ í”¼ì",
            crustOptions: ["thin"], // THì „ìš©ì€ ì”¬ í¬ëŸ¬ìŠ¤íŠ¸ë§Œ ì„ íƒ ê°€ëŠ¥
            image: "images/pizzas/pizza_crispy_pepperoni.jpg"
        },
        {
            id: 'crispy_cheese_triple', name: "í¬ë¦¬ìŠ¤í”¼ ì¹˜ì¦ˆ íŠ¸ë¦¬í”Œ í”¼ì", category: "ìŠ¤í˜ì…œí‹° & ì”¬ í”¼ì", note: "*THì „ìš©*",
            description: "ë°”ì‚­í•œ ì‹ê°ì˜ íˆ¬ì¹˜ì¦ˆ í¬ëŸ¬ìŠ¤íŠ¸ ì—£ì§€ì— ë¶€ë“œëŸ½ê³  ì§„í•œ ë§›ì„ ëŠë‚„ ìˆ˜ ìˆëŠ” ì•Œí”„ë ˆë„ ì†ŒìŠ¤, ì–‘ì†¡ì´ ë²„ì„¯, í–„ì´ 6ê°€ì§€ ì¹˜ì¦ˆì™€ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” í”¼ì",
            crustOptions: ["thin"], // THì „ìš©ì€ ì”¬ í¬ëŸ¬ìŠ¤íŠ¸ë§Œ ì„ íƒ ê°€ëŠ¥
            image: "images/pizzas/pizza_crispy_triple.jpg"
        },
        {
            id: 'ham_mushroom_six_cheese', name: "í–„ ë¨¸ì‰¬ë£¸ ì‹ìŠ¤ ì¹˜ì¦ˆ", category: "í´ë˜ì‹ í”¼ì", note: "",
            description: "ë°”ì‚­í•œ ì‹ê°ì˜ íˆ¬ì¹˜ì¦ˆ í¬ëŸ¬ìŠ¤íŠ¸ ì—£ì§€ì— ë¶€ë“œëŸ½ê³  ì§„í•œ ë§›ì„ ëŠë‚„ ìˆ˜ ìˆëŠ” ì•Œí”„ë ˆë„ ì†ŒìŠ¤, ì–‘ì†¡ì´ ë²„ì„¯, í–„ì´ 6ê°€ì§€ ì¹˜ì¦ˆì™€ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_ham_mushroom_six.jpg"
        },
        {
            id: 'wisconsin_cheese_potato', name: "ìœ„ìŠ¤ì½˜ì‹  ì¹˜ì¦ˆ í¬í…Œì´í† ", category: "í´ë˜ì‹ í”¼ì", note: "",
            description: "ì§„í•œ ë§¥ì•¤ì¹˜ì¦ˆ ë² ì´ìŠ¤ ì†ŒìŠ¤ì— 6ê°€ì§€ ì¹˜ì¦ˆ, í–„, ë² ì´ì»¨, í˜í¼ë¡œë‹ˆ, ë‹´ë°±í•˜ê³  ë‘íˆ¼í•œ ê°ìì²­í¬ì˜ ì¡°í™”ë¡œ ê¹Šì€ ì¹˜ì¦ˆë§›ê³¼ í’ë¶€í•œ í† í•‘ì„ ë§›ë³¼ ìˆ˜ ìˆëŠ” í”¼ì",
            crustOptions: ["original", "cheeseroll", "goldring", "spicygarlic", "croissant"], // ì”¬ í¬ëŸ¬ìŠ¤íŠ¸ ì œì™¸
            image: "images/pizzas/pizza_wisconsin_potato.jpg"
        },
        {
            id: 'double_cheeseburger', name: "ë”ë¸” ì¹˜ì¦ˆë²„ê±°", category: "í´ë˜ì‹ í”¼ì", note: "1+1í–‰ì‚¬ í”¼ì",
            description: "ì œìŠ¤í‹° ë²„ê±° ì†ŒìŠ¤ìœ„ì— ë¹„í”„ì™€ ìƒí¼í•œ í† ë§ˆí† , í”¼í´ì´ ì–´ìš°ì§„ í’ë¶€í•œ ë§›ì„ ì¦ê¸¸ ìˆ˜ ìˆëŠ” í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_double_cheeseburger.jpg"
        },
        {
            id: 'premium_bulgogi', name: "í”„ë¦¬ë¯¸ì—„ ì§í™”ë¶ˆê³ ê¸°", category: "í´ë˜ì‹ í”¼ì", note: "1+1í–‰ì‚¬ í”¼ì",
            description: "ì •í†µ ì§í™” ë¶ˆê³ ê¸°, ì‹ ì„ í•œ ì±„ì†Œ í† í•‘ìœ¼ë¡œ ëˆ„êµ¬ë‚˜ ì¢‹ì•„í• ìˆ˜ ìˆëŠ” íŒŒíŒŒì¡´ìŠ¤ì˜ ìŠ¤í…Œë”” ì…€ëŸ¬ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_premium_bulgogi.jpg"
        },
        {
            id: 'six_cheese', name: "ì‹ìŠ¤ ì¹˜ì¦ˆ", category: "í´ë˜ì‹ í”¼ì", note: "",
            description: "ëª¨ì§œë ë¼, ë¡œë§ˆë…¸, íŒŒë§ˆì‚°, ì•„ì‹œì•„ê³ , í°í‹°ë‚˜, í”„ë¡œë³¼ë¡œë„¤ 6ì¢…ì˜ ì¹˜ì¦ˆ ë§›ì„ í’ë¶€í•˜ê²Œ ëŠë‚„ ìˆ˜ ìˆëŠ” ì •í†µ ì¹˜ì¦ˆí”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_six_cheese.jpg"
        },
        {
            id: 'spicy_italian', name: "ìŠ¤íŒŒì´ì‹œ ì´íƒˆë¦¬ì•ˆ", category: "í´ë˜ì‹ í”¼ì", note: "",
            description: "ë“¬ë¿ ë“¤ì–´ê°„ ì´íƒˆë¦¬ì•ˆ ì†Œì‹œì§€ì˜ ë‘íˆ¼í•œ ì‹ê°ê³¼ í¬ëŸ¬ì‰¬ë“œ ë ˆë“œí˜í¼ì˜ ë§¤ìš´ë§›ì´ ì–´ìš°ëŸ¬ì§„ ë›°ì–´ë‚œ ë§›ê³¼ í–¥ì˜ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_spicy_italian.jpg"
        },
        {
            id: 'shrimp_alfredo', name: "ìŠˆë¦¼í”„ ì•Œí”„ë ˆë„", category: "ìŠ¤í˜ì…œí‹° & ì”¬ í”¼ì", note: "*THì „ìš©*",
            description: "ì–‡ê³  ë°”ì‚­í•œ ì”¬ë„ìš° ìœ„ì— ë¶€ë“œëŸ¬ìš´ ì•Œí”„ë ˆë„ ì†ŒìŠ¤ì™€ íƒ±íƒ±í•œ ìƒˆìš°ê°€ ë§Œë“¤ì–´ë‚´ëŠ” í’ë¶€í•œ ë§›ì´ íŠ¹ì§•ì¸ í”¼ì",
            crustOptions: ["thin"], // THì „ìš©ì€ ì”¬ í¬ëŸ¬ìŠ¤íŠ¸ë§Œ ì„ íƒ ê°€ëŠ¥
            image: "images/pizzas/pizza_shrimp_alfredo.jpg"
        },
        {
            id: 'margherita', name: "ë§ˆê°€ë¦¬íƒ€", category: "í´ë˜ì‹ í”¼ì", note: "",
            description: "íŒŒíŒŒì¡´ìŠ¤ íŠ¹ìœ ì˜ ì§„í•œ í† ë§ˆí†  ì†ŒìŠ¤ì™€ ìµœìƒê¸‰ ëª¨ì§œë ë¼ ì¹˜ì¦ˆê°€ í† í•‘ëœ ì¹˜ì¦ˆí”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_margherita.jpg"
        },
        {
            id: 'pepperoni', name: "í˜í¼ë¡œë‹ˆ", category: "í´ë˜ì‹ í”¼ì", note: "",
            description: "ì«„ê¹ƒì«„ê¹ƒ ì§­ì¡°ë¦„í•œ í˜í¼ë¡œë‹ˆì™€ ê³ ì†Œí•œ ì¹˜ì¦ˆê°€ í† í•‘ëœ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_classic_pepperoni.jpg"
        },
        {
            id: 'hawaiian', name: "í•˜ì™€ì´ì•ˆ", category: "í´ë˜ì‹ í”¼ì", note: "",
            description: "ìƒˆì½¤ë‹¬ì½¤í•œ íŒŒì¸ì• í”Œê³¼ í–„, ì«€ë“í•œ ëª¨ì§œë ë¼ ì¹˜ì¦ˆ í† í•‘ìœ¼ë¡œ ìƒí¼í•œ ë§›ì´ íŠ¹ì§•ì¸ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_hawaiian.jpg"
        },
        {
            id: 'garden_special', name: "ê°€ë“  ìŠ¤í˜ì…œ", category: "í´ë˜ì‹ í”¼ì", note: "",
            description: "í† ë§ˆí†  ì†ŒìŠ¤ ìœ„ì— ì–‘ì†¡ì´, ì²­í”¼ë§, ì˜¬ë¦¬ë¸Œ, ì–‘íŒŒ, í† ë§ˆí† ë“±ì˜ ì‹ ì„ í•œì±„ì†Œê°€ í† í•‘ëœ í”¼ì",
            crustOptions: ["original", "thin", "cheeseroll", "goldring", "spicygarlic", "croissant"],
            image: "images/pizzas/pizza_garden_special.jpg"
        },
        {
            id: 'green_it_margherita', name: "ê·¸ë¦°ì‡ ì‹ë¬¼ì„± ë§ˆê°€ë¦¬íƒ€", category: "ë¹„ê±´ í”¼ì", note: "VEGAN, * í¬ëŸ¬ìŠ¤íŠ¸ ì„ íƒ ë¶ˆê°€",
            description: "ì „í†µìˆëŠ” SHEESEì‚¬ì˜ ë¹„ê±´ì¹˜ì¦ˆì™€ ì‹ ì„ í•œ í† ë§ˆí†  ì†ŒìŠ¤ì˜ ë§Œë‚¨ìœ¼ë¡œ ê¹”ë”í•œ í’ë¯¸",
            crustOptions: ["original"], // í¬ëŸ¬ìŠ¤íŠ¸ ë³€ê²½ ë¶ˆê°€
            image: "images/pizzas/pizza_vegan_margherita.jpg"
        },
        {
            id: 'green_it_garden_special', name: "ê·¸ë¦°ì‡ ì‹ë¬¼ì„± ê°€ë“ ìŠ¤í˜ì…œ", category: "ë¹„ê±´ í”¼ì", note: "VEGAN, * í¬ëŸ¬ìŠ¤íŠ¸ ì„ íƒ ë¶ˆê°€",
            description: "ì „í†µìˆëŠ” SHEESEì‚¬ì˜ ë¹„ê±´ì¹˜ì¦ˆì™€ ì‹ ì„ í•œ ì±„ì†Œê°€ ì–´ìš°ëŸ¬ì§„ ì²˜ìŒ ë§›ë³´ëŠ” ì›°ë¹™ ì±„ì‹ í”¼ì",
            crustOptions: ["original"], // í¬ëŸ¬ìŠ¤íŠ¸ ë³€ê²½ ë¶ˆê°€
            image: "images/pizzas/pizza_vegan_garden.jpg"
        }
    ];

    // --- 2. ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---

    /** ê¸ˆì•¡ì„ â‚©12,345 í˜•ì‹ìœ¼ë¡œ ë³€í™˜ */
    function formatPrice(amount) {
        if (typeof amount !== 'number' || isNaN(amount)) return 'â‚©0';
        return `â‚©${Math.round(amount).toLocaleString('ko-KR')}`;
    }

    /** IDë¥¼ í†µí•´ í”¼ì ìƒì„¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. */
    function getPizzaById(pizzaId) {
        return PIZZA_DATA.find(p => p.id === pizzaId);
    }


    // --- 3. ì˜µì…˜ ë™ì  ìƒì„± í•¨ìˆ˜ ---

    /** í”¼ìì˜ ìœ íš¨í•œ ì‚¬ì´ì¦ˆ ì˜µì…˜ì„ <select> íƒœê·¸ì— ì±„ì›ë‹ˆë‹¤. */
    function createSizeOptions(pizzaId) {
        const prices = PIZZA_PRICES[pizzaId];
        const sizeSelect = document.getElementById(`size-${pizzaId}`);
        
        // ê¸°ë³¸ "ì„ íƒí•˜ì„¸ìš”" ì˜µì…˜ ì™¸ ëª¨ë‘ ì œê±°
        if (sizeSelect.options.length > 1) {
            sizeSelect.innerHTML = `<option value="0">ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•˜ì„¸ìš”</option>`;
        }
        
        // R, L, F, P ìˆœì„œë¡œ ì˜µì…˜ ìƒì„±
        // R: ë ˆê·¤ëŸ¬(25cm), L: ë¼ì§€(31cm), F: íŒ¨ë°€ë¦¬(36cm), P: íŒŒí‹°(41cm)
        ['R', 'L', 'F', 'P'].forEach(size => {
            if (prices && prices[size] > 0) {
                const option = document.createElement('option');
                option.value = size;
                option.textContent = `${size} (${formatPrice(prices[size])})`;
                sizeSelect.appendChild(option);
            }
        });
    }


    // --- 4. ê°€ê²© ê³„ì‚° ë° ë²„íŠ¼ í™œì„±í™” í•¨ìˆ˜ ---

    /** ì„ íƒëœ ì˜µì…˜ì„ ê¸°ë°˜ìœ¼ë¡œ í”¼ì í•œ íŒì˜ ì´ ê¸ˆì•¡ì„ ê³„ì‚°í•˜ê³  í‘œì‹œí•©ë‹ˆë‹¤. */
    function updatePrice(pizzaId) {
        const card = document.getElementById(pizzaId);
        if (!card) return;

        const sizeSelect = card.querySelector('.size-select');
        const crustSelect = card.querySelector('.crust-select');
        const quantityInput = card.querySelector('.quantity-input');
        const totalPriceDisplay = card.querySelector('.total-price');
        const crustAddTextDisplay = card.querySelector('.crust-add-text');
        const addButton = card.querySelector('.add-to-bill-btn');
        const pizza = getPizzaById(pizzaId);

        // 1. ê°’ ì¶”ì¶œ
        const selectedSize = sizeSelect.value;
        const selectedCrust = crustSelect.value;
        // ìˆ˜ëŸ‰ì€ 1 ë¯¸ë§Œìœ¼ë¡œ ë‚´ë ¤ê°€ì§€ ì•Šë„ë¡ ê°•ì œ
        const quantity = Math.max(1, parseInt(quantityInput.value) || 1);
        quantityInput.value = quantity; // UIì— ìµœì†Œ 1 ë°˜ì˜

        // 2. ê°€ê²© ê³„ì‚°
        let basePrice = 0;
        let crustPrice = 0;
        let totalPrice = 0;
        
        const isValidSize = selectedSize !== '0';
        
        if (isValidSize && PIZZA_PRICES[pizzaId] && PIZZA_PRICES[pizzaId][selectedSize] > 0) {
            basePrice = PIZZA_PRICES[pizzaId][selectedSize];
            
            // í¬ëŸ¬ìŠ¤íŠ¸ ê°€ê²© ì¶”ê°€
            if (selectedCrust && CRUST_PRICES[selectedCrust] !== undefined) {
                crustPrice = CRUST_PRICES[selectedCrust];
            }
            
            // ì´ ê¸ˆì•¡ = (ê¸°ë³¸ ê°€ê²© + í¬ëŸ¬ìŠ¤íŠ¸ ì¶”ê°€ ê°€ê²©) * ìˆ˜ëŸ‰
            totalPrice = (basePrice + crustPrice) * quantity;
        }

        // 3. UI ì—…ë°ì´íŠ¸
        if (isValidSize) {
            totalPriceDisplay.textContent = formatPrice(totalPrice);
            addButton.disabled = false;
        } else {
            totalPriceDisplay.textContent = 'ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•˜ì„¸ìš”';
            addButton.disabled = true;
        }
        
        // 4. í¬ëŸ¬ìŠ¤íŠ¸ ì¶”ê°€ ê¸ˆì•¡ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        if (crustAddTextDisplay && pizza) {
            if (crustPrice > 0 && selectedCrust !== 'original' && selectedCrust !== 'thin') {
                crustAddTextDisplay.textContent = `(ì¶”ê°€: ${formatPrice(crustPrice)})`;
                crustAddTextDisplay.style.color = 'var(--main-color)'; // ë©”ì¸ ì»¬ëŸ¬ë¡œ ë³€ê²½
            } else if (selectedCrust === 'original' && pizza.crustOptions.length === 1) {
                crustAddTextDisplay.textContent = `* í¬ëŸ¬ìŠ¤íŠ¸ ë³€ê²½ ë¶ˆê°€`;
                crustAddTextDisplay.style.color = 'var(--danger-color)';
            } else {
                crustAddTextDisplay.textContent = '';
            }
        }
    }


    // --- 5. ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€ í•¨ìˆ˜ ---

    /** ì¥ë°”êµ¬ë‹ˆì— ì•„ì´í…œì„ ì¶”ê°€í•˜ê³  í˜ì´ì§€ë¥¼ ì´ë™í•©ë‹ˆë‹¤. */
    window.addToCart = function(pizzaId) {
        const card = document.getElementById(pizzaId);
        if (!card) return;

        const sizeSelect = card.querySelector('.size-select');
        const crustSelect = card.querySelector('.crust-select');
        const quantityInput = card.querySelector('.quantity-input');

        const selectedSize = sizeSelect.value;
        const selectedCrust = crustSelect.value;
        const quantity = parseInt(quantityInput.value) || 1;

        if (selectedSize === '0') {
            alert('ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•´ì•¼ ì¥ë°”êµ¬ë‹ˆì— ë‹´ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            return;
        }

        // ìµœì¢… ê°€ê²© ê³„ì‚°
        const basePrice = PIZZA_PRICES[pizzaId][selectedSize];
        const crustPrice = CRUST_PRICES[selectedCrust] || 0;
        const itemPricePerUnit = basePrice + crustPrice;
        const itemTotal = itemPricePerUnit * quantity;

        // ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ê°ì²´ ìƒì„±
        const item = {
            pizzaId: pizzaId,
            name: PIZZA_NAME_MAP[pizzaId] || 'ì•Œ ìˆ˜ ì—†ëŠ” í”¼ì',
            size: selectedSize,
            crustId: selectedCrust,
            crustName: CRUST_NAME_MAP[selectedCrust] ? CRUST_NAME_MAP[selectedCrust].split('(')[0].trim() : selectedCrust,
            price: itemPricePerUnit, // ë‹¨ìœ„ ê°€ê²©
            quantity: quantity,
            total: itemTotal
        };

        // 1. ì¥ë°”êµ¬ë‹ˆ ë¶ˆëŸ¬ì˜¤ê¸°
        let cart = JSON.parse(localStorage.getItem(CART_KEY) || '[]');

        // 2. ê¸°ì¡´ ìƒí’ˆ ì°¾ê¸° ë° ì—…ë°ì´íŠ¸ (í”¼ì ì¢…ë¥˜, ì‚¬ì´ì¦ˆ, í¬ëŸ¬ìŠ¤íŠ¸ê°€ ëª¨ë‘ ê°™ì•„ì•¼ ë³‘í•©)
        const existingItemIndex = cart.findIndex(
            i => i.pizzaId === item.pizzaId && i.size === item.size && i.crustId === item.crustId
        );

        if (existingItemIndex > -1) {
            cart[existingItemIndex].quantity += quantity;
            cart[existingItemIndex].total = cart[existingItemIndex].price * cart[existingItemIndex].quantity;
        } else {
            cart.push(item);
        }

        // 3. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì—…ë°ì´íŠ¸ëœ ì¥ë°”êµ¬ë‹ˆ ì €ì¥
        localStorage.setItem(CART_KEY, JSON.stringify(cart));
        
        // 4. ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ ë° í˜ì´ì§€ ì´ë™
        alert(`[${item.name} (${item.size}, ${item.crustName})] ${quantity}ê°œë¥¼ ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.`);
        window.location.href = 'bill.html'; // bill.htmlë¡œ ì´ë™í•˜ë„ë¡ ìˆ˜ì • (ê³„ì‚°ì„œ)
    };


    // --- 6. í”¼ì ì¹´ë“œ ëœë”ë§ í•¨ìˆ˜ (HTML ë™ì  ìƒì„±) ---

    /**
     * í”¼ì ë°ì´í„° ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ HTML ì¹´ë“œ ìš”ì†Œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
     */
    function createPizzaCard(pizza) {
        const card = document.createElement('div');
        card.className = 'pizza-card shadow-lg hover:shadow-xl transition duration-300';
        card.id = pizza.id; 
        card.setAttribute('data-name', pizza.name);
        card.setAttribute('data-category', pizza.category);
        
        // í¬ëŸ¬ìŠ¤íŠ¸ ì˜µì…˜ ìƒì„±
        const crustOptionsHtml = pizza.crustOptions.map(crustId => {
            const crustName = CRUST_NAME_MAP[crustId] || crustId;
            return `<option value="${crustId}">${crustName}</option>`;
        }).join('');

        const isBogo = BOGO_MENU_IDS.includes(pizza.id);
        const isVegan = pizza.note.includes('VEGAN');
        const badgeText = isVegan ? 'VEGAN' : (isBogo ? '1+1 í–‰ì‚¬' : (pizza.note.includes('NEW') ? 'NEW' : ''));
        const badgeClass = isVegan ? 'vegan-badge' : (isBogo ? 'badge' : (pizza.note.includes('NEW') ? 'badge' : ''));

        // HTML êµ¬ì¡° ì‚½ì…
        card.innerHTML = `
            <div class="pizza-card-header">
                <h3>
                    ${pizza.name}
                    ${badgeText ? `<span class="${badgeClass}">${badgeText}</span>` : ''}
                </h3>
            </div>
            <img src="${pizza.image}" alt="${pizza.name}" class="card-image">
            <div class="pizza-card-body">
                <p class="pizza-description">${pizza.description}</p>
                
                <div class="pizza-options">
                    <div class="option-group">
                        <label for="size-${pizza.id}">ì‚¬ì´ì¦ˆ</label>
                        <select id="size-${pizza.id}" class="size-select" required>
                            <option value="0">ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                            </select>
                    </div>
                    
                    <div class="option-group">
                        <label for="crust-${pizza.id}">í¬ëŸ¬ìŠ¤íŠ¸</label>
                        <select id="crust-${pizza.id}" class="crust-select">
                            ${crustOptionsHtml}
                        </select>
                        <p id="crust-add-text-${pizza.id}" class="crust-add-text"></p>
                    </div>
                    
                    <div class="quantity-control option-group">
                        <label for="quantity-${pizza.id}">ìˆ˜ëŸ‰</label>
                        <input type="number" id="quantity-${pizza.id}" class="quantity-input" value="1" min="1">
                    </div>

                    <div class="price-section current-price">
                        <span>ì´ ê¸ˆì•¡:</span>
                        <span id="total-price-${pizza.id}" class="total-price">ì‚¬ì´ì¦ˆë¥¼ ì„ íƒí•˜ì„¸ìš”</span>
                    </div>
                </div>

                <button class="add-to-bill-btn" disabled onclick="addToCart('${pizza.id}')">
                    ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
                </button>
            </div>
        `;

        return card;
    }

    /**
     * PIZZA_DATAë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì „ì²´ ë©”ë‰´íŒì„ ì´ˆê¸°í™”í•˜ê³  ëœë”ë§í•©ë‹ˆë‹¤.
     */
    function initializePizzaCards() {
        // menu.htmlì— ìˆëŠ” ê° ì¹´í…Œê³ ë¦¬ë³„ ul(div) íƒœê·¸ì˜ IDë¥¼ ì§€ì •
        const lists = {
            "í”„ë¦¬ë¯¸ì—„ í”¼ì": document.getElementById('premium-list'),
            "ë² ìŠ¤íŠ¸ í”¼ì": document.getElementById('best-list'),
            "ìŠ¤í˜ì…œí‹° & ì”¬ í”¼ì": document.getElementById('specialty-list'),
            "í´ë˜ì‹ í”¼ì": document.getElementById('classic-list'),
            "ë¹„ê±´ í”¼ì": document.getElementById('vegan-list'),
        };

        PIZZA_DATA.forEach(pizza => {
            const card = createPizzaCard(pizza);
            const listElement = lists[pizza.category];
            
            if (listElement) {
                listElement.appendChild(card); 
            } else {
                console.warn(`Category list not found for: ${pizza.category}`);
            }
        });
    }


    // --- 7. ìµœì¢… ì´ˆê¸°í™” (ëª¨ë“  ì¹´ë“œ ìƒì„± ë° ê¸°ëŠ¥ ì ìš©) ---

    document.addEventListener('DOMContentLoaded', function() {
        
        // 1. í”¼ì ì¹´ë“œ ìƒì„± ë° HTMLì— ì‚½ì…
        initializePizzaCards(); 
        
        // 2. ë™ì ìœ¼ë¡œ ìƒì„±ëœ ëª¨ë“  ì¹´ë“œì— ëŒ€í•´ ê¸°ëŠ¥ ì ìš©
        document.querySelectorAll('.pizza-card').forEach(card => {
            const pizzaId = card.id;
            
            // 2-1. ì‚¬ì´ì¦ˆ ì˜µì…˜ ë™ì  ìƒì„± (ë¹ˆ select ì±„ìš°ê¸°)
            createSizeOptions(pizzaId); 
            
            // 2-2. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¬ë“±ë¡: ì‚¬ì´ì¦ˆ, í¬ëŸ¬ìŠ¤íŠ¸, ìˆ˜ëŸ‰ ë³€ê²½ ì‹œ ê°€ê²© ì—…ë°ì´íŠ¸
            card.querySelectorAll('.size-select, .crust-select, .quantity-input').forEach(element => {
                element.addEventListener('change', () => updatePrice(pizzaId));
                element.addEventListener('input', () => updatePrice(pizzaId));
            });

            // 2-3. ì´ˆê¸° ê°€ê²© ì„¤ì •
            updatePrice(pizzaId);
        });
    });
    </script>

</body>
</html>