<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>시흥 은행점 파파존스</title>
<style>
    /* 전체 배경 – index.jpeg 한 장을 그대로 사용 */
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo",
            "Malgun Gothic", system-ui, sans-serif;
        background: #ffffff url("index.jpeg") no-repeat center top;
        background-size: cover;             /* 화면 가득 */
        overflow-x: hidden;
        position: relative;
    }

    /* 내용 영역 – 배경 이미지 위에 투명한 레이어만 올림 */
    .page-wrap {
        min-height: 100vh;
        position: relative;
        padding-bottom: 220px;             /* 하단 배너 자리 확보 (아이콘 안 가리게) */
        box-sizing: border-box;
    }

    /* 4개 아이콘 클릭 레이어 (배경에 그려진 아이콘 위치에 맞춰 투명 박스만 올림) */
    .icon-layer {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 140px;                     /* 필요하면 이 값만 조금씩 조절해서 맞추면 됨 */
        display: flex;
        justify-content: center;
        gap: 32px;
        pointer-events: none;              /* 전체는 클릭 막고 */
        z-index: 900;
    }

    .icon-hit {
        width: 86px;                       /* 아이콘 원 크기 정도 */
        height: 86px;
        border-radius: 50%;
        pointer-events: auto;              /* 각각만 클릭 가능 */
        /* 디버깅용 – 위치 확인할 때 잠시 켜서 확인
        border: 1px dashed rgba(0,0,0,.1);
        background: rgba(255,0,0,.05);
        */
    }

    /* 하단 배너 영역 */
    .banner-container {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        padding: 10px 0 8px;
        background: transparent;           /* 배경은 투명, index.jpeg가 보이게 */
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 800;
    }

    .banner-viewport {
        width: 100%;
        max-width: 480px;                  /* QR로 보는 휴대폰 폭 기준 */
        overflow: hidden;
        border-radius: 10px;
    }

    .banner-track {
        display: flex;
        transition: transform 0.45s ease;
        will-change: transform;
    }

    .banner-slide {
        min-width: 100%;
        cursor: pointer;
    }

    .banner-slide img {
        width: 100%;
        height: auto;
        display: block;
    }

    /* ●●● 페이지 인디케이터 */
    .banner-dots {
        margin-top: 6px;
        display: flex;
        gap: 6px;
        justify-content: center;
        align-items: center;
    }

    .banner-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: rgba(0,0,0,.18);
        transition: all 0.25s ease;
    }

    .banner-dot.active {
        width: 16px;
        border-radius: 999px;
        background: #ff9800;
    }

    /* 팝업 공통 오버레이 */
    .popup-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.45);
        display: none;                     /* JS에서 .show 붙여 열기 */
        align-items: center;
        justify-content: center;
        z-index: 3000;                     /* 배너/아이콘보다 항상 위 */
        padding: 16px;
        box-sizing: border-box;
    }

    .popup-overlay.show {
        display: flex;
    }

    .popup-inner {
        position: relative;
        max-width: 520px;
        width: 100%;
    }

    .popup-image {
        width: 100%;
        height: auto;
        display: block;
        border-radius: 14px;
    }

    .popup-close {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 42px;                       /* close.png보다 작지 않게 크게 */
        height: 42px;
        padding: 0;
        border: none;
        background: transparent url("assets/images/etx/close.png") no-repeat center;
        background-size: contain;
        cursor: pointer;
    }

    .popup-close:active {
        transform: scale(0.92);
    }
</style>
</head>
<body>
<div class="page-wrap">
    <!-- 배경 전체는 index.jpeg 이고, 이 안에 모든 디자인(PAPA JOHNS, EVENT, 아이콘 등)이 들어 있음 -->
</div>

<!-- 4개 아이콘 클릭 영역 – 배경 속 원 위치에 맞춰 놓는 투명 hit-area -->
<div class="icon-layer">
    <!-- 이벤트 보기 -->
    <a
        class="icon-hit"
        href="https://pji.co.kr/event/w_ongoingList"
        aria-label="이벤트 보기"
        target="_blank"
        rel="noopener"
    ></a>

    <!-- 홈페이지 -->
    <a
        class="icon-hit"
        href="https://pji.co.kr/w_main"
        aria-label="파파존스 홈페이지"
        target="_blank"
        rel="noopener"
    ></a>

    <!-- 콜센터 -->
    <a
        class="icon-hit"
        href="tel:15778080"
        aria-label="콜센터 전화걸기"
    ></a>

    <!-- 매장 주문 (시흥 은행점) -->
    <a
        class="icon-hit"
        href="tel:0313136995"
        aria-label="시흥 은행점 전화 주문"
    ></a>
</div>

<!-- 하단 슬라이드 배너 -->
<div class="banner-container">
    <div class="banner-viewport" id="bannerViewport">
        <div class="banner-track" id="bannerTrack">
            <!-- 순서: 1+1 → 카드결제 → 통신사 30% -->
            <div class="banner-slide" data-popup="popup-one">
                <img src="assets/images/etx/friday_1plus1.jpeg" alt="파파 프라이데이 1+1" />
            </div>
            <div class="banner-slide" data-popup="popup-card">
                <img src="assets/images/etx/card.jpeg" alt="카드 결제 시 할인" />
            </div>
            <div class="banner-slide" data-popup="popup-telecom">
                <img src="assets/images/etx/telecom_30.jpeg" alt="통신사 멤버십 30% 할인" />
            </div>
        </div>
    </div>

    <!-- ●●● 인디케이터 -->
    <div class="banner-dots" id="bannerDots">
        <div class="banner-dot active" data-index="0"></div>
        <div class="banner-dot" data-index="1"></div>
        <div class="banner-dot" data-index="2"></div>
    </div>
</div>

<!-- 3종 팝업: 카드 / 통신사 / 1+1 -->
<div class="popup-overlay" id="popup-card">
    <div class="popup-inner">
        <button class="popup-close" type="button" aria-label="닫기"></button>
        <img
            src="assets/images/etx/card_pop.jpeg"
            alt="카드사 혜택 안내"
            class="popup-image"
        />
    </div>
</div>

<div class="popup-overlay" id="popup-telecom">
    <div class="popup-inner">
        <button class="popup-close" type="button" aria-label="닫기"></button>
        <img
            src="assets/images/etx/phon.jpeg"
            alt="통신사 멤버십 혜택 안내"
            class="popup-image"
        />
    </div>
</div>

<div class="popup-overlay" id="popup-one">
    <div class="popup-inner">
        <button class="popup-close" type="button" aria-label="닫기"></button>
        <img
            src="assets/images/etx/one.jpg"
            alt="파파 프라이데이 1+1 상세 안내"
            class="popup-image"
        />
    </div>
</div>

<script>
(function () {
    /* -----------------------------
       하단 배너 슬라이더
       ----------------------------- */
    const track   = document.getElementById("bannerTrack");
    const slides  = Array.from(track.querySelectorAll(".banner-slide"));
    const dotsBox = document.getElementById("bannerDots");
    const dots    = Array.from(dotsBox.querySelectorAll(".banner-dot"));
    const viewport = document.getElementById("bannerViewport");

    const total = slides.length;
    let current = 0;
    let autoTimer = null;

    function goToSlide(index, withAnimation = true) {
        current = (index + total) % total;

        if (!withAnimation) {
            track.style.transition = "none";
        } else {
            track.style.transition = "transform 0.45s ease";
        }
        track.style.transform = `translateX(-${current * 100}%)`;

        dots.forEach((dot, i) => {
            dot.classList.toggle("active", i === current);
        });
    }

    function startAuto() {
        if (autoTimer) clearInterval(autoTimer);
        autoTimer = setInterval(() => {
            goToSlide(current + 1);
        }, 8000);  // 1초마다 자동 슬라이드
    }

    function stopAuto() {
        if (autoTimer) clearInterval(autoTimer);
    }

    // 인디케이터 직접 선택
    dots.forEach((dot) => {
        dot.addEventListener("click", () => {
            const idx = Number(dot.dataset.index || "0");
            stopAuto();
            goToSlide(idx);
            startAuto();
        });
    });

    // 터치/드래그 슬라이드
    let startX = 0;
    let movedX = 0;
    let isDragging = false;

    function pointerDown(e) {
        isDragging = true;
        startX = e.touches ? e.touches[0].clientX : e.clientX;
        movedX = 0;
        stopAuto();
    }

    function pointerMove(e) {
        if (!isDragging) return;
        const x = e.touches ? e.touches[0].clientX : e.clientX;
        movedX = x - startX;
    }

    function pointerUp() {
        if (!isDragging) return;
        isDragging = false;

        const threshold = 40; // 40px 이상이면 슬라이드
        if (movedX > threshold) {
            goToSlide(current - 1);
        } else if (movedX < -threshold) {
            goToSlide(current + 1);
        }
        startAuto();
    }

    viewport.addEventListener("touchstart", pointerDown, { passive: true });
    viewport.addEventListener("touchmove", pointerMove, { passive: true });
    viewport.addEventListener("touchend", pointerUp);
    viewport.addEventListener("mousedown", pointerDown);
    window.addEventListener("mousemove", pointerMove);
    window.addEventListener("mouseup", pointerUp);

    // 배너 클릭 시 팝업 열기
    slides.forEach((slide) => {
        slide.addEventListener("click", () => {
            const targetId = slide.dataset.popup;
            if (!targetId) return;
            const popup = document.getElementById(targetId);
            if (!popup) return;
            popup.classList.add("show");
        });
    });

    /* -----------------------------
       팝업 닫기 (버튼 + 바깥 클릭)
       ----------------------------- */
    const popups = Array.from(document.querySelectorAll(".popup-overlay"));

    popups.forEach((popup) => {
        const closeBtn = popup.querySelector(".popup-close");

        if (closeBtn) {
            closeBtn.addEventListener("click", (e) => {
                e.stopPropagation();
                popup.classList.remove("show");
            });
        }

        // 이미지 바깥 영역 클릭 시 닫기
        popup.addEventListener("click", (e) => {
            if (e.target === popup) {
                popup.classList.remove("show");
            }
        });
    });

    // 초기 위치 & 자동 슬라이드 시작
    goToSlide(0, false);
    startAuto();
})();
</script>
</body>
</html>