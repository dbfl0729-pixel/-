<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>시흥 은행점 파파존스</title>

<style>
/* --------------------------------------
   0. 기본 설정
----------------------------------------*/
* { box-sizing: border-box; }

body {
  margin: 0;
  padding: 0;
  background: url("index.jpeg") no-repeat top center;
  background-size: cover;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo",
    "Malgun Gothic", sans-serif;
}

/* --------------------------------------
   1. 아이콘 영역 (배경 속 동그라미 위에 클릭영역 올리기)
----------------------------------------*/
.icon-wrap {
  width: 100%;
  margin-top: 68vh;          /* 필요하면 숫자만 살짝 조절해서 위치 맞추면 됨 */
  display: flex;
  justify-content: center;
  gap: 2.2rem;
}

.icon-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}

/* 실제로 클릭되는 원형 히트영역 (투명) */
.icon-hit {
  width: 72px;
  height: 72px;
  border-radius: 50%;
}

/* 아이콘 아래 라벨 텍스트 */
.icon-label {
  margin-top: 0.35rem;
  font-size: 0.9rem;
  font-weight: 600;
  letter-spacing: 0.02em;
  color: #3b7d0f;
}

/* --------------------------------------
   2. 하단 슬라이드 배너
----------------------------------------*/
.banner-area {
  width: 100%;
  position: relative;
  overflow: hidden;
  margin-top: 1.8rem;
  padding-bottom: 1.2rem;  /* 인디케이터와 간격 */
}

/* 3장의 배너를 가로로 이어 붙인 트랙 */
.slide-track {
  display: flex;
  width: 300%;          /* 배너 3장 */
  transition: transform 0.7s ease-in-out;
}

/* 하나의 슬라이드(한 장씩 화면 전체 사용) */
.slide-item {
  width: 100vw;         /* 기기 가로길이 전체 */
  flex-shrink: 0;
}

.slide-item img {
  width: 100%;
  height: auto;
  display: block;
}

/* --------------------------------------
   3. 배너 페이지 인디케이터(●●●)
----------------------------------------*/
.banner-dots {
  position: absolute;
  left: 50%;
  bottom: 0.2rem;
  transform: translateX(-50%);
  display: flex;
  gap: 0.4rem;
}

.banner-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(0,0,0,0.18);
  cursor: pointer;
}

.banner-dot.active {
  width: 10px;
  height: 10px;
  background: #ffba00;
}

/* --------------------------------------
   4. 배너 팝업 모달
----------------------------------------*/
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: none;                 /* JS로 flex로 바꿈 */
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.modal-inner {
  position: relative;
  max-width: 480px;
  width: 90vw;
}

.modal-inner img.popup-img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 8px;
}

/* 닫기 버튼 (조금 크게 & 정사각형) */
.modal-close {
  position: absolute;
  top: -14px;
  right: -14px;
  width: 32px;
  height: 32px;
  cursor: pointer;
}

/* --------------------------------------
   5. 작은 화면에서 여백 살짝 조절
----------------------------------------*/
@media (max-width: 480px) {
  .icon-wrap {
    margin-top: 66vh;
    gap: 1.6rem;
  }
  .icon-hit {
    width: 64px;
    height: 64px;
  }
  .icon-label {
    font-size: 0.85rem;
  }
}
</style>
</head>

<body>

<!-- 1. 아이콘 4개 (배경 속 동그라미 위에 클릭 영역만 올린 구조) -->
<div class="icon-wrap">
  <div class="icon-box" onclick="location.href='https://pji.co.kr/event/w_ongoingList'">
    <div class="icon-hit"></div>
    <div class="icon-label">이벤트보기</div>
  </div>

  <div class="icon-box" onclick="location.href='https://pji.co.kr/w_main'">
    <div class="icon-hit"></div>
    <div class="icon-label">홈페이지</div>
  </div>

  <div class="icon-box" onclick="location.href='tel:15778080'">
    <div class="icon-hit"></div>
    <div class="icon-label">콜센터</div>
  </div>

  <div class="icon-box" onclick="location.href='tel:0313136995'">
    <div class="icon-hit"></div>
    <div class="icon-label">매장 주문</div>
  </div>
</div>

<!-- 2. 하단 자동 슬라이드 배너 -->
<div class="banner-area" id="bannerArea">
  <div class="slide-track" id="bannerTrack">
    <!-- 1+1 배너 -->
    <div class="slide-item" onclick="openModal('popup-one')">
      <img src="assets/images/etx/friday_1plus1.jpeg" alt="파파 프라이데이 1+1">
    </div>
    <!-- 카드사 배너 -->
    <div class="slide-item" onclick="openModal('popup-card')">
      <img src="assets/images/etx/card.jpeg" alt="카드 결제 시 할인">
    </div>
    <!-- 통신사 배너 -->
    <div class="slide-item" onclick="openModal('popup-telecom')">
      <img src="assets/images/etx/telecom_30.jpeg" alt="통신사 멤버십 30% 할인">
    </div>
  </div>

  <!-- 페이지 인디케이터 ●●● -->
  <div class="banner-dots" id="bannerDots">
    <span class="banner-dot active" data-index="0"></span>
    <span class="banner-dot" data-index="1"></span>
    <span class="banner-dot" data-index="2"></span>
  </div>
</div>

<!-- 3. 배너별 팝업 모달 -->
<!-- 1+1 팝업 -->
<div class="modal" id="popup-one" onclick="closeModal('popup-one')">
  <div class="modal-inner" onclick="event.stopPropagation()">
    <img src="assets/images/etx/one.jpg" class="popup-img" alt="1+1 상세 안내">
    <img src="assets/images/etx/close.png" class="modal-close"
         alt="닫기" onclick="closeModal('popup-one')" />
  </div>
</div>

<!-- 카드사 팝업 -->
<div class="modal" id="popup-card" onclick="closeModal('popup-card')">
  <div class="modal-inner" onclick="event.stopPropagation()">
    <img src="assets/images/etx/card_pop.jpeg" class="popup-img" alt="카드 혜택 안내">
    <img src="assets/images/etx/close.png" class="modal-close"
         alt="닫기" onclick="closeModal('popup-card')" />
  </div>
</div>

<!-- 통신사 팝업 -->
<div class="modal" id="popup-telecom" onclick="closeModal('popup-telecom')">
  <div class="modal-inner" onclick="event.stopPropagation()">
    <img src="assets/images/etx/phon.jpeg" class="popup-img" alt="통신사 혜택 안내">
    <img src="assets/images/etx/close.png" class="modal-close"
         alt="닫기" onclick="closeModal('popup-telecom')" />
  </div>
</div>

<script>
/* --------------------------------------
   A. 슬라이드/인디케이터 제어
----------------------------------------*/
const track = document.getElementById("bannerTrack");
const dots  = document.querySelectorAll(".banner-dot");
const BANNER_COUNT = 3;

/* 슬라이드 속도(ms) - 여기 숫자만 바꾸면 됨 */
const SLIDE_INTERVAL = 4000;

let currentIndex = 0;
let timerId = null;

function goToSlide(idx) {
  currentIndex = (idx + BANNER_COUNT) % BANNER_COUNT;
  track.style.transform = `translateX(-${currentIndex * 100}vw)`;

  // 인디케이터 업데이트
  dots.forEach((dot, i) => {
    dot.classList.toggle("active", i === currentIndex);
  });
}

function nextSlide() {
  goToSlide(currentIndex + 1);
}

function prevSlide() {
  goToSlide(currentIndex - 1);
}

function startAutoSlide() {
  stopAutoSlide();
  timerId = setInterval(nextSlide, SLIDE_INTERVAL);
}

function stopAutoSlide() {
  if (timerId) {
    clearInterval(timerId);
    timerId = null;
  }
}

/* 인디케이터 클릭으로 이동 */
dots.forEach(dot => {
  dot.addEventListener("click", () => {
    const idx = Number(dot.dataset.index);
    goToSlide(idx);
    startAutoSlide();  // 클릭 후에도 자동 재생 유지
  });
});

/* --------------------------------------
   B. 터치 스와이프 기능
----------------------------------------*/
const bannerArea = document.getElementById("bannerArea");
let startX = 0;
let isDragging = false;

bannerArea.addEventListener("touchstart", e => {
  if (e.touches.length !== 1) return;
  startX = e.touches[0].clientX;
  isDragging = true;
  stopAutoSlide();
}, {passive: true});

bannerArea.addEventListener("touchend", e => {
  if (!isDragging) return;
  const endX = e.changedTouches[0].clientX;
  const diffX = endX - startX;

  const SWIPE_THRESHOLD = 50; // 손가락 이동 최소거리(px)
  if (Math.abs(diffX) > SWIPE_THRESHOLD) {
    if (diffX < 0) nextSlide();   // 왼쪽 스와이프 → 다음 슬라이드
    else          prevSlide();   // 오른쪽 스와이프 → 이전 슬라이드
  }
  isDragging = false;
  startAutoSlide();
}, {passive: true});

/* --------------------------------------
   C. 팝업 열기/닫기
----------------------------------------*/
function openModal(id) {
  document.getElementById(id).style.display = "flex";
  stopAutoSlide();   // 팝업이 열려 있을 땐 배너 멈춤
}

function closeModal(id) {
  document.getElementById(id).style.display = "none";
  startAutoSlide();
}

/* 초기 자동 슬라이드 시작 */
goToSlide(0);
startAutoSlide();
</script>

</body>
</html>